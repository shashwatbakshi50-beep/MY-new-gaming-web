<!DOCTYPE html>
<html>
<head>
<title>Empire Pro Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{
margin:0;
font-family:Segoe UI;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
color:white;
}
.container{max-width:1200px;margin:auto;padding:30px;}
.card{
background:rgba(255,255,255,0.08);
padding:20px;
border-radius:15px;
margin-bottom:20px;
}
h1{text-align:center;color:#f0b90b;}
input{
width:100%;
padding:8px;
margin:6px 0;
border:none;
border-radius:8px;
}
button{
padding:6px 12px;
border:none;
border-radius:8px;
cursor:pointer;
font-weight:bold;
margin-top:5px;
}
.btn-yellow{background:#f0b90b;color:black;}
.btn-green{background:#00c853;color:white;}
.btn-red{background:#ff1744;color:white;}
.box{
background:#1e2329;
padding:8px;
border-radius:8px;
margin-top:6px;
display:flex;
justify-content:space-between;
align-items:center;
flex-wrap:wrap;
}
#dashboard{display:none;}
canvas{background:white;border-radius:10px;padding:10px;}
.small-btn{padding:4px 8px;font-size:12px;margin-left:5px;}
.file-info{font-size:12px;color:#ccc;}
</style>
</head>
<body>

<div class="container">
<h1>ðŸ‘‘ Empire Admin Panel</h1>

<!-- SET PASSWORD -->
<div id="setupBox" class="card" style="display:none;">
<h2>Set Admin Password</h2>
<input type="password" id="newPass" placeholder="Create Password">
<button class="btn-yellow" onclick="setPassword()">Save Password</button>
</div>

<!-- LOGIN -->
<div id="loginBox" class="card" style="display:none;">
<h2>Admin Login</h2>
<input type="password" id="loginPass" placeholder="Enter Password">
<button class="btn-yellow" onclick="login()">Login</button>
<p id="error" style="color:red;"></p>
</div>

<!-- DASHBOARD -->
<div id="dashboard">

<div class="card">
<h2>ðŸ“Š Sales Graph</h2>
<canvas id="salesChart"></canvas>
<button class="btn-red" onclick="logout()">Logout</button>
<button class="btn-yellow small-btn" onclick="changePassword()">Change Password</button>
</div>

<div class="card">
<h2>Upload Game</h2>
<input id="gName" placeholder="Game Name">
<input id="gPrice" type="number" placeholder="Price â‚¹">
<input type="file" id="gFile">
<button class="btn-green" onclick="addGame()">Upload Game</button>
<div id="gList"></div>
</div>

<div class="card">
<h2>Add Customer</h2>
<input id="cName" placeholder="Customer Name">
<input id="cEmail" placeholder="Customer Email">
<button class="btn-green" onclick="addCustomer()">Add Customer</button>
<div id="cList"></div>
</div>

<div class="card">
<h2>Add Purchase</h2>
<input id="pName" placeholder="Buyer Name">
<input id="pAmt" type="number" placeholder="Amount â‚¹">
<button class="btn-green" onclick="addPurchase()">Add Purchase</button>
<div id="pList"></div>
</div>

</div>
</div>

<script>

// INITIAL LOAD
window.onload=function(){
if(!localStorage.getItem("adminPassword")){
document.getElementById("setupBox").style.display="block";
}else if(localStorage.getItem("adminLogin")==="true"){
showDashboard();
}else{
document.getElementById("loginBox").style.display="block";
}
}

// PASSWORD SYSTEM
function setPassword(){
let pass=newPass.value.trim();
if(pass.length<4){ alert("Minimum 4 characters"); return; }
localStorage.setItem("adminPassword",pass);
alert("Password Set!");
location.reload();
}

function login(){
let pass=loginPass.value.trim();
if(pass===localStorage.getItem("adminPassword")){
localStorage.setItem("adminLogin","true");
showDashboard();
}else{
error.innerText="Wrong Password";
}
}

function logout(){
localStorage.removeItem("adminLogin");
location.reload();
}

function changePassword(){
let np=prompt("Enter New Password:");
if(np && np.length>=4){
localStorage.setItem("adminPassword",np);
alert("Password Changed!");
}
}

// DASHBOARD
function showDashboard(){
setupBox.style.display="none";
loginBox.style.display="none";
dashboard.style.display="block";
loadData();
drawChart();
}

// GAME UPLOAD
function addGame(){
let games=JSON.parse(localStorage.getItem("games"))||[];
let fileInput=document.getElementById("gFile");
let fileName=fileInput.files[0] ? fileInput.files[0].name : "No File";

games.push({
name:gName.value,
price:gPrice.value,
file:fileName
});

localStorage.setItem("games",JSON.stringify(games));
gName.value="";gPrice.value="";gFile.value="";
loadData();
}

function deleteGame(i){
let games=JSON.parse(localStorage.getItem("games"))||[];
games.splice(i,1);
localStorage.setItem("games",JSON.stringify(games));
loadData();
}

// CUSTOMER
function addCustomer(){
let customers=JSON.parse(localStorage.getItem("customers"))||[];
customers.push({name:cName.value,email:cEmail.value});
localStorage.setItem("customers",JSON.stringify(customers));
cName.value="";cEmail.value="";
loadData();
}

// PURCHASE
function addPurchase(){
let purchases=JSON.parse(localStorage.getItem("purchases"))||[];
purchases.push({name:pName.value,amount:+pAmt.value});
localStorage.setItem("purchases",JSON.stringify(purchases));
pName.value="";pAmt.value="";
loadData();
drawChart();
}

// LOAD DATA
function loadData(){
let games=JSON.parse(localStorage.getItem("games"))||[];
let customers=JSON.parse(localStorage.getItem("customers"))||[];
let purchases=JSON.parse(localStorage.getItem("purchases"))||[];

gList.innerHTML=games.map((g,i)=>
`<div class="box">
<div>
<b>${g.name}</b> - â‚¹${g.price}
<div class="file-info">File: ${g.file}</div>
</div>
<button class="btn-red small-btn" onclick="deleteGame(${i})">Delete</button>
</div>`).join("");

cList.innerHTML=customers.map(c=>
`<div class="box">${c.name} - ${c.email}</div>`).join("");

pList.innerHTML=purchases.map(p=>
`<div class="box">${p.name} - â‚¹${p.amount}</div>`).join("");
}

// SALES GRAPH
function drawChart(){
let purchases=JSON.parse(localStorage.getItem("purchases"))||[];
let labels=purchases.map(p=>p.name);
let data=purchases.map(p=>p.amount);

if(window.chartInstance){ window.chartInstance.destroy(); }

window.chartInstance=new Chart(salesChart,{
type:"bar",
data:{
labels:labels,
datasets:[{
label:"Sales â‚¹",
data:data,
backgroundColor:"#f0b90b"
}]
}
});
}

</script>

</body>
</html>
